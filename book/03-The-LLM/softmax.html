<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Softmax Visualization</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .explanation {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }
        .temperature-explanation {
            background: #fff3e0;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #ff9800;
        }
        .controls {
            margin: 20px 0;
        }
        .slider-group {
            margin: 15px 0;
        }
        .slider-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input[type="range"] {
            width: 100%;
            height: 6px;
        }
        .value-display {
            display: inline-block;
            min-width: 50px;
            text-align: right;
            font-family: monospace;
            font-size: 14px;
        }
        .temperature-control {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            border: 2px solid #ff9800;
        }
        .temperature-label {
            font-size: 18px;
            color: #ff9800;
        }
        .visualization {
            margin: 30px 0;
        }
        .bar-chart {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .bar-group {
            flex: 1;
        }
        .bar-label {
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
            color: #666;
        }
        .bar-container {
            height: 200px;
            background: #f0f0f0;
            border-radius: 5px;
            position: relative;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            border: 2px solid #ddd;
        }
        .bar {
            width: 60%;
            background: linear-gradient(to top, #2196F3, #64B5F6);
            border-radius: 5px 5px 0 0;
            transition: height 0.3s ease;
            position: relative;
        }
        .bar-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            color: #333;
            font-size: 14px;
        }
        .formula {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: monospace;
            text-align: center;
            border-left: 4px solid #4caf50;
        }
        .sum-display {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 5px;
            font-weight: bold;
            color: #2e7d32;
        }
        .preset-buttons {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        .preset-btn {
            padding: 8px 16px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .preset-btn:hover {
            background: #1976D2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Softmax Temperature Visualization</h1>
        
        <div class="explanation">
            <strong>What is Softmax?</strong><br>
            Softmax transforms a vector of numbers into a probability distribution. Each output is between 0 and 1, and all outputs sum to 1.
        </div>

        <div class="temperature-explanation">
            <strong>Temperature Effect:</strong><br>
            As you increase the temperature multiplier (scale inputs up), the softmax becomes more "confident" - it approaches a step function where the highest input gets probability ≈1 and others get ≈0. This is what people mean by "acting like a step function"!
        </div>

        <div class="controls">
            <div class="slider-group">
                <label>
                    Input x₁: <span class="value-display" id="x1-display">2.0</span>
                </label>
                <input type="range" id="x1" min="-5" max="5" step="0.1" value="2">
            </div>
            <div class="slider-group">
                <label>
                    Input x₂: <span class="value-display" id="x2-display">1.0</span>
                </label>
                <input type="range" id="x2" min="-5" max="5" step="0.1" value="1">
            </div>
            <div class="slider-group">
                <label>
                    Input x₃: <span class="value-display" id="x3-display">0.5</span>
                </label>
                <input type="range" id="x3" min="-5" max="5" step="0.1" value="0.5">
            </div>
        </div>

        <div class="preset-buttons">
            <button class="preset-btn" onclick="setPreset(2, 1, 0.5)">Reset to Default</button>
            <button class="preset-btn" onclick="setPreset(3, 2, 1)">Clear Winner</button>
            <button class="preset-btn" onclick="setPreset(1, 0.9, 0.8)">Close Race</button>
        </div>

        <div class="temperature-control">
            <div class="slider-group">
                <label class="temperature-label">
                    Temperature Multiplier: <span class="value-display" id="temp-display">1.0</span>x
                </label>
                <input type="range" id="temp" min="0.1" max="10" step="0.1" value="1">
                <div style="display: flex; justify-content: space-between; font-size: 12px; color: #666; margin-top: 5px;">
                    <span>Low (0.1x) - Smooth, uniform</span>
                    <span>High (10x) - Sharp, step-like</span>
                </div>
            </div>
        </div>

        <div class="formula" id="formula">
            softmax(x<sub>i</sub> × 1.0) = exp(x<sub>i</sub> × 1.0) / Σ exp(x<sub>j</sub> × 1.0)
        </div>

        <div class="visualization">
            <h3 style="text-align: center; color: #333;">Softmax Outputs (Probabilities)</h3>
            <div class="bar-chart">
                <div class="bar-group">
                    <div class="bar-label">Class 1</div>
                    <div class="bar-container">
                        <div class="bar" id="bar1">
                            <div class="bar-value" id="prob1">0.33</div>
                        </div>
                    </div>
                </div>
                <div class="bar-group">
                    <div class="bar-label">Class 2</div>
                    <div class="bar-container">
                        <div class="bar" id="bar2">
                            <div class="bar-value" id="prob2">0.33</div>
                        </div>
                    </div>
                </div>
                <div class="bar-group">
                    <div class="bar-label">Class 3</div>
                    <div class="bar-container">
                        <div class="bar" id="bar3">
                            <div class="bar-value" id="prob3">0.33</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sum-display" id="sum-display">
                Sum of probabilities: 1.000
            </div>
        </div>
    </div>

    <script>
        function softmax(values) {
            const exps = values.map(x => Math.exp(x));
            const sumExps = exps.reduce((a, b) => a + b, 0);
            return exps.map(e => e / sumExps);
        }

        function setPreset(v1, v2, v3) {
            document.getElementById('x1').value = v1;
            document.getElementById('x2').value = v2;
            document.getElementById('x3').value = v3;
            updateVisualization();
        }

        function updateVisualization() {
            const x1 = parseFloat(document.getElementById('x1').value);
            const x2 = parseFloat(document.getElementById('x2').value);
            const x3 = parseFloat(document.getElementById('x3').value);
            const temp = parseFloat(document.getElementById('temp').value);

            document.getElementById('x1-display').textContent = x1.toFixed(1);
            document.getElementById('x2-display').textContent = x2.toFixed(1);
            document.getElementById('x3-display').textContent = x3.toFixed(1);
            document.getElementById('temp-display').textContent = temp.toFixed(1);

            // Apply temperature scaling
            const scaledValues = [x1 * temp, x2 * temp, x3 * temp];
            const probs = softmax(scaledValues);

            // Update formula display
            document.getElementById('formula').innerHTML = 
                `softmax(x<sub>i</sub> × ${temp.toFixed(1)}) = exp(x<sub>i</sub> × ${temp.toFixed(1)}) / Σ exp(x<sub>j</sub> × ${temp.toFixed(1)})`;

            for (let i = 0; i < 3; i++) {
                const bar = document.getElementById(`bar${i + 1}`);
                const probDisplay = document.getElementById(`prob${i + 1}`);
                
                const heightPercent = probs[i] * 100;
                bar.style.height = `${heightPercent}%`;
                probDisplay.textContent = probs[i].toFixed(3);
            }

            const sum = probs.reduce((a, b) => a + b, 0);
            document.getElementById('sum-display').textContent = 
                `Sum of probabilities: ${sum.toFixed(3)} (always equals 1.0)`;
        }

        document.getElementById('x1').addEventListener('input', updateVisualization);
        document.getElementById('x2').addEventListener('input', updateVisualization);
        document.getElementById('x3').addEventListener('input', updateVisualization);
        document.getElementById('temp').addEventListener('input', updateVisualization);

        updateVisualization();
    </script>
</body>
</html>
